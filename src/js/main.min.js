"use strict";

function readFile(file, callback) {
  var rawFile = new XMLHttpRequest();
  rawFile.overrideMimeType('application/json');
  rawFile.open('GET', file, true);

  rawFile.onreadystatechange = function () {
    if (rawFile.readyState === 4 && rawFile.status == '200') {
      callback(rawFile.responseText);
    }
  };

  rawFile.send(null);
}

function sendData() {
  var formData = new FormData();
  formData.append('name_property', 'value');
  var xmlHttp = new XMLHttpRequest();

  xmlHttp.onreadystatechange = function () {
    if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
      console.log(xmlHttp.responseText);
    }
  };

  xmlHttp.open("post", "./php/update.php");
  xmlHttp.send(formData);
} //usage:


readFile('./data.json', function (text) {
  var data = JSON.parse(text);
  var app = document.getElementById('app');

  var _ul = document.createElement('ul');

  _ul.classList.add('list');

  app.appendChild(_ul);
  data.data.forEach(function (element) {
    var prop = Object.getOwnPropertyNames(element)[0];

    var _li_ul = document.createElement('li');

    _li_ul.classList.add('list-item');

    var link = document.createElement('a');
    link.href = '#';
    link.classList.add('list-item__link');
    link.innerHTML = element[prop][0].name_cat;

    link.onclick = function (e) {
      e.preventDefault();
      console.log(e.target.textContent);
    };

    _ul.appendChild(_li_ul);

    _li_ul.appendChild(link);
  });
  var btnSend = document.createElement('button');
  btnSend.textContent = 'Отправить';
  btnSend.classList.add('btn-send');

  btnSend.onclick = function () {
    sendData();
  };

  app.appendChild(btnSend);
});